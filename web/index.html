<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Background generator</title>
        <link rel="stylesheet" href="Semantic-UI-CSS/semantic.min.css">
        <link rel="stylesheet" href="style.css">
        <link rel="icon" href="icon.png" type="image/png">
        <script
			  src="https://code.jquery.com/jquery-3.5.1.min.js"
			  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
			  crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/p5@1.0.0/lib/p5.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script>
        <script src="Semantic-UI-CSS/semantic.min.js"></script>
        <script src="state.js"></script>
        <script src="generator.js"></script>
    </head>
    <body>
        <div class="ui container">
            <nav class="ui secondary pointing menu">
                <span class="item active">Background generator</span>
                <button onclick="save('background.png')" class="ui button item">Download</button>
                <a class="item" href="https://github.com/samporapeli/background-generator" target="_blank">Source on Github</a>
            </nav>
            <main>
                <div id="interface" @change="state.next = true;">
                    <h3>Colors</h3>
                    <select v-model="state.selectedPalette" id="palette-selector" class="ui dropdown" @change="changePalette(state.selectedPalette)">
                        <option v-for="palette in state.palettes" :value="palette.id">{{ palette.name }}</option>
                    </select>
                    <div class="ui grid">
                        <div class="doubling four column row">
                            <div v-for="color in state.colors" class="column">
                                <div class="ui input">
                                    <input type="checkbox" v-model="color[1]"></input>
                                    <span class="color-indicator" v-bind:style="{'background-color': color}"></span>
                                    <input type="text" v-model="color[0]"></input>
                                </div>
                            </div>
                        </div>
                    </div>
                    <h3>Blocks</h3>
                    <div class="ui grid">
                        <div class="doubling one column row">
                            <div class="column">
                                <label>Amount
                                    <input type="number" v-model="state.blockAmount" min="0" max="50"></input>
                                </label>
                            </div>
                            <div class="column">
                                <label>Largeness
                                    <span>{{ state.largeness }}</span>
                                    <input type="range" v-model="state.largeness" min="1" max="7" step="0.1"></input>
                                </label>
                            </div>
                            <div class="column">
                                <label>Size variation
                                    <span>{{ state.sizeVariation }}</span>
                                    <input type="range" v-model="state.sizeVariation" min="0" max="4" step="0.1"></input>
                                </label>
                            </div>
                        </div>
                    </div>
                    <h3>Location</h3>
                    <div class="ui grid">
                        <div class="doubling one column row">
                            <div class="column">
                                <button class="ui button" onclick="state.randSeed = + new Date(); state.next = true;">Randomize alignment</button>
                            </div>
                            <div class="column">
                                <label>Start angle
                                    <input type="range" v-model="state.seedAngle" min="0" max="7" step="0.1"></input>
                                </label>
                            </div>
                            <div class="column">
                                <label>Angle increasement between blocks
                                    <input type="range" v-model="state.angleIncrement" min="0" max="2" step="0.01"></input>
                                </label>
                            </div>
                        </div>
                    </div>
                    <h3>Size</h3>
                    <div class="ui grid">
                        <div class="doubling one column row">
                            <div class="column">
                                <select v-model="state.resolution" id="resolution-selector" class="ui dropdown" @change="updateResolution()">
                                    <option v-for="resolution in state.resolutions" :value="resolution">{{ resolution[0] + "x" + resolution[1] }}</option>
                                </select>
                                <button class="ui button" @click="state.portrait = !state.portrait; updateResolution(); next();">{{ state.portrait ? "Portrait" : "Landscape" }}</button>
                            </div>
                            <div class="column">
                                <label>Width
                                <input type="number" v-model="state.width"></input>
                                </label>
                            </div>
                            <div class="column">
                                <label>Height
                                <input type="number" v-model="state.height"></input>
                                </label>
                            </div>
                        </div>
                <div id="generator-container"></div>
            </main>
            <footer class="ui vertical footer segment">
                <div class="ui grid">
                    <span class="left floated five wide column"><a class="item" href="https://samporapeli.fi" target="_blank">Sampo Rapeli</a> 2020</span>
                    <span class="right floated five wide column">Version 1.0.0</span>
                </div>
            </footer>
            <script src="interface.js"></script>
        </div>
    </body>
</html>
